(this["webpackJsonpinteractable-team-plan"]=this["webpackJsonpinteractable-team-plan"]||[]).push([[0],{206:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(28),i=n.n(a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(230),o=n(229),l=n(15),s=n.n(l),u=n(110),d=n(20),f=n(4);var p=n(65);var h=function(t,e){for(var n=Math.max.apply(Math,Object(p.a)(e.map((function(t){return t.id}))))+1,r=Object(p.a)(e),a=0;a<t.length;a++){var i={id:n,task:"",team:"",objective:t[a].objective,complete:"FALSE"};r.push(i),n++}return r};function g(t){return"TRUE"===t}var m=50,v=70,j=50,x=500,b=x+m+25,O=b*Math.sqrt(2),y=Math.min(500,x)/2,k=(Math.PI,f.g),w=60,A=O/2-v,S=250+m,T=(f.f().range(k),f.e().range([0,1]),f.e().range([.2,.35])),M=f.e().range([5,9]);function C(t,e){return f.a().innerRadius(t[e].inner).outerRadius(t[e].outer).cornerRadius([2])}function B(t){return f.b(t).darker([2])+""}function P(t,e){var n=t[0],r=function(t,e,n){for(var r=(e-n)/(t+1),a=[{inner:n,outer:n+r}],i=1;i<t;i++){var c=a[i-1].outer+1;a.push({inner:c,outer:c+r})}return a}(t.length,y,90);T.domain([1,t.length]),M.domain([1,t.length]);var a=e.append("g").attr("class","mainChart");a.selectAll(".arc").data(n).enter().append("g").attr("class","arc").append("path").attr("id",(function(t){return"seg"+t.data.id})).attr("d",C(r,0)).style("fill",k[1]),a.selectAll(".oText").data(n).enter().append("text").attr("class","oText").attr("dy",(r[0].outer-r[0].inner)/2+2).attr("text-anchor","middle").attr("id",(function(t){return"text"+t.data.id})).style("fill","black").append("textPath").attr("startOffset","25%").attr("href",(function(t){return"#seg"+t.data.id})).attr("font-size","0.4em").text((function(t){return t.data.objective}));for(var i=function(e){var n=t[e];a.selectAll(".arc"+e.toString()).data(n).enter().append("g").attr("class","arc"+e.toString()).append("path").attr("id",(function(t){return"seg"+t.data.id})).attr("d",C(r,e)).style("fill",(function(t){var n=g(t.data.complete),r=f.b(k[e+1]);return n&&(r.opacity=.25),r+""})),a.selectAll(".task"+e.toString()).data(n).enter().append("text").attr("class","task"+e.toString()).attr("id",(function(t){return"text"+t.data.id})).attr("x",3).attr("dy",M(e)).style("fill",(function(t){return g(t.data.complete)?B(k[e+1]):"black"})).append("textPath").attr("href",(function(t){return"#seg"+t.data.id})).attr("font-size",T(e)+"em").text((function(t){return t.data.task})).each((function(t){!function(t,e,n,r){var a=f.h(t),i=f.h(a.node().parentNode),c=a.text().split(" "),o=[],l=1,s=i.attr("y"),u=i.attr("dy"),d=a.attr("href"),p=+a.attr("font-size").slice(0,-2),h=(e.endAngle-e.startAngle)*((n.outer+n.inner)/2),m=g(e.data.complete);if(a.node().getComputedTextLength()>h){for(;a.node().getComputedTextLength()>h;)o.push(c.pop()),a.text(c.join(" "));u=p<.3?5:6,i.attr("dy",u),l++,f.h(i.node().parentNode).append("text").attr("x",i.attr("x")).attr("y",s).attr("dy",l*u).attr("fill",m?r:"black").append("textPath").attr("href",d).attr("font-size",a.attr("font-size")).text(o.reverse().join(" "))}}(this,t,r[e],B(k[e+1]))}))},c=1;c<t.length;c++)i(c);var o=function(t){return t.map((function(t){var e=t[0].data.team;return 0===e.length?"Strategic Objectives":e}))}(t);o.splice(0,0,"Library Service Values");var l=f.e().domain([0,o.length]).range([5,150]),s=m/3-250,u=e.append("g").attr("transform","translate(250,"+s+")");u.selectAll(".circ").data(o).enter().append("circle").attr("class","circ").attr("cx",j).attr("cy",(function(t,e){return l(e)})).attr("r",4).attr("stroke","black").attr("stroke-width",.25).style("fill",(function(t,e){return k[e]})),u.selectAll(".legendText").data(o).enter().append("text").attr("class","legendText").attr("x",j+8).attr("y",(function(t,e){return l(e)+.5})).attr("dominant-baseline","middle").attr("font-size","0.4em").attr("fill","black").text((function(t){return t}))}var z=function(t){var e=t.tasks,n=t.objectives,r=function(t,e){var n,r,a,i,c=t.map((function(t){return t.value})),o=t.map((function(t){return t.id})),l=[{id:o.shift(),x:e,y:e,value:c.shift()}],s=2*e;for(i=0;i<c.length;i++)n=i/(c.length/2)*Math.PI,r=e*Math.cos(n)+s/2,a=e*Math.sin(n)+s/2,l.push({id:o[i],x:r,y:a,value:c[i]});return l}(t.values,w),a=f.h("#svg").attr("viewBox","0 0 ".concat(O," ").concat(b)).append("g").attr("transform","translate(".concat(A,",").concat(S,")"));f.h("#svg").call(f.j().on("zoom",(function(t){var e=t.transform;return f.h("#svg > g").attr("transform",e)}))),a.append("text").attr("y",b/-2+m/2-10).attr("font-size","1.25em").attr("text-anchor","middle").text("Libraries' Team Plan ".concat("2021-22"));var i=a.append("g").attr("transform","translate(".concat(-60,",").concat(-60,")"));i.append("circle").attr("r",w).attr("cx",w).attr("cy",w).attr("fill","none").attr("stroke","#e5e5e5").attr("stroke-width",8),i.selectAll(".valueCirc").data(r).enter().append("circle").attr("class","valueCirc").attr("r",25).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("stroke-width",.5).attr("fill",k[0]),i.selectAll(".valueTxt").data(r).enter().append("text").attr("class","valueTxt").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("text-anchor","middle").attr("font-size","0.4em").attr("id",(function(t){return t.id})).text((function(t){return t.value})).each((function(t){for(var e,n=f.h(this),r=n.text().split(" ").reverse(),a=0,i=t.y,c=t.x,o=[],l=2*Math.sqrt(Math.pow(25,2)-Math.pow(a,2))-7,s=n.text(null).append("tspan").attr("x",c).attr("y",i).attr("dy",a+"em");e=r.pop();)o.push(e),s.text(o.join(" ")),s.node().getComputedTextLength()>l&&(o.pop(),s.text(o.join(" ")),o=[e],a+=1.1,s=n.append("tspan").attr("x",c).attr("y",i).attr("dy",a+"em").text(e));var u=n.node().getBBox().height-12;n.attr("transform","translate(0, ".concat(u/2/-1," )"))})),P(function(t,e){var n=h(t,e),r=f.c().value([1]).padAngle([.005]).sort(null);n.forEach((function(t,e){if(" "===t.team[t.team.length-1]){var n=t.team.slice(0,-1);t.team=n}return t}));var a=function(t){return t.map((function(t){return t.team})).filter((function(t,e,n){return n.indexOf(t)===e}))}(n).filter((function(t){return""!==t}));a.splice(0,0,"");for(var i=r(function(t){return t.filter((function(t){return t.team.length<1}))}(n)),c=i.map((function(t){return{start:t.startAngle,end:t.endAngle}})),o=i.map((function(t,e){for(var i=c[e],o=n.filter((function(e){return e.objective===t.data.objective})),l=[],s=function(t){var e=o.filter((function(e){return e.team===a[t]})),n=r.startAngle(i.start).endAngle(i.end)(e);e.length>0&&l.push(n)},u=1;u<a.length;u++)s(u);return l})).reduce((function(t,e){return t.concat(e)}),[]).reduce((function(t,e){return t.concat(e)}),[]),l=[i],s=function(t){l.push(o.filter((function(e){return e.data.team===a[t]})))},u=1;u<a.length;u++)s(u);return l}(n,e),a)},E=n(225),N=n(2),R=Object(E.a)((function(t){return{tooltip:{display:"inline",marginLeft:function(e){return e.margin?t.spacing(3)+e.margin.left:0},marginTop:function(e){return e.margin?t.spacing(3)+e.margin.top:0},position:"absolute",left:function(t){return t.left?t.left:"auto"},top:function(t){return t.top},transform:"translate(-50%, -100%)",visibility:function(t){return t.visible?"visible":"hidden"},background:t.palette.grey[900],opacity:.9,color:t.palette.primary.contrastText,borderRadius:t.shape.borderRadius,padding:t.spacing(1)}}}));var L=function(t){var e=R(t);return Object(N.jsx)("div",{className:e.tooltip,children:t.children})};var W=n(226),D=n(231),F=function(t){if(!t)return t;if(!t.includes("Pillar"))return t;var e=Number(t.replace("Pillar ",""));return"".concat(t,": ").concat(["Operations","Strategic Leadership and Business Direction","Brand and Market Position","Knowledge Management and Business Intelligence","Stakeholder Engagement and Relationship Management","Resource Efficiency and Skills Deployment","Financial Planning and Controls"][e])},I=function(t){var e=t.title,n=t.text;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(W.a,{variant:"caption",display:"block",color:"secondary",children:e}),Object(N.jsx)(W.a,{variant:"body2",display:"block",gutterBottom:!0,children:n})]})};function q(t){var e=t.hoverData,n=e.objective,r=e.team,a=e.task;return 0===r.length?Object(N.jsx)(W.a,{variant:"caption",component:"div",children:Object(N.jsx)(D.a,{fontWeight:"fontWeightBold",children:n})}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(I,{title:"Task",text:a}),Object(N.jsx)(I,{title:"Outcome",text:n}),Object(N.jsx)(W.a,{variant:"caption",component:"div",color:"primary",children:Object(N.jsx)(D.a,{fontStyle:"italic",children:F(r)})})]})}var J=n(46),G=n(104),K=n(105),U={select:G.a,selectAll:K.a};function V(t){var e=U.select(t.target),n=function(t){return Object(J.a)(t).darker([.5])}(e.style("fill"));e.attr("stroke",n.toString()).attr("stroke-width",2)}function $(t,e){var n;V(t),(n=e.data.team).length>0&&U.selectAll(".legendText").filter((function(t){return t===n})).style("font-weight","bold"),function(t){U.selectAll(".circ").filter((function(e){return e===t})).attr("stroke-width",1)}(e.data.team)}function H(t,e){var n;!function(t){U.select(U.select(t.target).node().firstElementChild).attr("stroke","none")}(t),n=e.data.team,U.selectAll(".legendText").filter((function(t){return t===n})).style("font-weight","normal"),function(t){U.selectAll(".circ").filter((function(e){return e===t})).attr("stroke-width",.25)}(e.data.team)}var Q=Object(E.a)((function(t){return{root:{display:"block",margin:"auto"},chartWrapper:{position:"relative"}}}));var X=function(t){var e=t.data,n=Q(),a=Object(r.useState)({objective:"Test",task:"test",team:"test"}),i=Object(d.a)(a,2),c=i[0],o=i[1],l=Object(r.useState)([0,0]),s=Object(d.a)(l,2),u=s[0],p=s[1],h=Object(r.useState)(!1),g=Object(d.a)(h,2),m=g[0],v=g[1];return Object(r.useEffect)((function(){return z(e)}),[e]),Object(r.useEffect)((function(){f.i('g[class^="arc"]').style("cursor","pointer").on("mouseover",(function(t,e){var n=e.data,r=n.objective,a=n.task,i=n.team;o({objective:r,task:a,team:i}),p(function(t){var e=f.h("#svg").node(),n=e.getBoundingClientRect(),r=f.d(t,e),a=Object(d.a)(r,2),i=a[0],c=a[1];return[i*(n.width/O),c*(n.height/b)]}(t)),$(t,e),(r.length>0&&a.length>0||0===i.length)&&v(!0)})).on("mouseleave",(function(t,e){H(t,e),v(!1)}))}),[]),Object(N.jsxs)("div",{className:n.chartWrapper,children:[Object(N.jsx)("svg",{id:"svg",className:n.root}),Object(N.jsx)(L,{left:u[0],top:u[1]-5,visible:m,children:Object(N.jsx)(q,{hoverData:c})})]})},Y=n(232),Z=n(111),_=n.n(Z),tt=n(112),et=n.n(tt),nt=n(227),rt={select:G.a},at=Object(E.a)((function(t){return{root:{flexGrow:1,padding:t.spacing(1)}}})),it=function(t){var e=t.direction,n=t.click,r=t.degrees;return Object(N.jsx)(nt.a,{item:!0,sm:12,md:6,children:Object(N.jsx)(Y.a,{variant:"outlined",onClick:function(){return n(r)},startIcon:"left"===e?Object(N.jsx)(_.a,{}):Object(N.jsx)(et.a,{}),children:e})})},ct=function(t){var e=rt.select(".mainChart"),n=e.attr("transform"),r="rotate(".length,a=n?Number(n.slice(r,n.indexOf(")",r))):0;e.transition().duration(1e3).attr("transform","rotate(".concat(a+t,")"))};function ot(t){var e=t.degrees,n=at();return Object(N.jsxs)(nt.a,{container:!0,spacing:2,className:n.root,children:[Object(N.jsx)(it,{direction:"left",click:ct,degrees:e/-1}),Object(N.jsx)(it,{direction:"right",click:ct,degrees:e})]})}var lt=n(228),st=Object(E.a)((function(t){return{loading:{display:"flex",margin:"auto",padding:t.spacing(2)}}}));var ut=function(){var t=Object(r.useState)(null),e=Object(d.a)(t,2),n=e[0],a=e[1],i=st();return Object(r.useEffect)((function(){(function(){var t=Object(u.a)(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://team-plan.glitch.me/api/main");case 3:return e=t.sent,t.next=6,e.json();case 6:n=t.sent,a(n),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),a(null),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(N.jsxs)(nt.a,{container:!0,spacing:3,children:[Object(N.jsx)(nt.a,{item:!0,xs:2,children:Object(N.jsx)(ot,{degrees:n?360/(2*n.objectives.length):45})}),Object(N.jsx)(nt.a,{item:!0,xs:10,children:n?Object(N.jsx)(X,{data:n}):Object(N.jsx)(lt.a,{className:i.loading})})]})},dt=n(113),ft=Object(dt.a)({});i.a.render(Object(N.jsxs)(o.a,{theme:ft,children:[Object(N.jsx)(c.a,{}),Object(N.jsx)(ut,{})]}),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[206,1,2]]]);
//# sourceMappingURL=main.e41dad8e.chunk.js.map